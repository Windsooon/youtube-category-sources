{% extends "base.html" %}
{% load staticfiles %}
{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/cate.css' %}" />
{% endblock %}
{% block tilte %}
<title>Youtube List</title>
{% endblock %}

{% block content %}
<div class="cate-content">
  <div class="pure-g search-cate-div">
    <div class="pure-u-1 pure-u-md-1-2 select-cate-div">
      <div class="control-group">
        <label for="select-cate"></label>
        <select id="select-cate" class="select-cate" placeholder="Select a Category...">
          <option value="">Select a Category...</option>
          <option value=1>Science</option>
          <option value=2>Education</option>
          <option value=3>Unboxings/Reviews</option>
          <option value=4>How to</option>
          <option value=5>Talkshow</option>
          <option value=6>Game</option>
          <option value=7>Scene drama</option>
          <option value=8>Daily life</option>
          <option value=9>Talent</option>
          <option value=10>News</option>
          <option value=11>Music</option>
          <option value=12>Sports</option>
          <option value=13>Commentary</option>
        </select>
      </div> <!-- end control-group -->
    </div> <!-- end pure-u-1 -->
  </div> <!-- end pure-g -->

  <div class="pure-g cate-block-pure">
    <div class="pure-u-1 pure-u-md-1-3 cate-block">
      <div class="cate-block-inside">
        <div class="cate-title">
          <img class="cate-img" src="{% static 'imgs/layers.png' %}" />
          <span class="cate-span">Design</span>
        </div> <!-- end cate-title -->
      </div> <!-- end cate-block-inside -->
    </div> <!-- end cate-block -->
  </div> <!-- end cate-block-pure -->

</div> <!-- end country-content -->
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'js/cate.js' %}"></script>
<script>
$('#select-repo').selectize({
    valueField: 'url',
    labelField: 'name',
    searchField: 'name',
    options: [],
    create: false,
    render: {
        option: function(item, escape) {
            return '<div>' +
                '<span class="title">' +
                    '<span class="name"><i class="icon ' + (item.fork ? 'fork' : 'source') + '"></i>' + escape(item.name) + '</span>' +
                    '<span class="by">' + escape(item.username) + '</span>' +
                '</span>' +
                '<span class="description">' + escape(item.description) + '</span>' +
                '<ul class="meta">' +
                    (item.language ? '<li class="language">' + escape(item.language) + '</li>' : '') +
                    '<li class="watchers"><span>' + escape(item.watchers) + '</span> watchers</li>' +
                    '<li class="forks"><span>' + escape(item.forks) + '</span> forks</li>' +
                '</ul>' +
            '</div>';
        }
    },
    score: function(search) {
        var score = this.getScoreFunction(search);
        return function(item) {
            return score(item) * (1 + Math.min(item.watchers / 100, 1));
        };
    },
    load: function(query, callback) {
        if (!query.length) return callback();
        $.ajax({
            url: 'https://api.github.com/legacy/repos/search/' + encodeURIComponent(query),
            type: 'GET',
            error: function() {
                callback();
            },
            success: function(res) {
                console.log(res.repositories);
                callback(res.repositories.slice(0, 2));
            }
        });
    }
});
</script>
{% endblock %}
